<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tony Drew for the Gold!</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Oswald:wght@500;700&display=swap" rel="stylesheet">

<style>
:root{
  --brand:#FFC907;
  --bg:#f7f7f7;
  --card:#ffffff;
  --border:#e8e8e8;
  --name-col:120px;
  --lane-h:88px;
  --maxw:980px;
}
  *{box-sizing:border-box}
  body{margin:0;padding:18px 12px 36px;font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:#111;}
  .wrap{max-width:var(--maxw);margin:0 auto;}

  header{text-align:center;margin-bottom:12px;}
  header h1{font-family:Oswald,Impact,Haettenschweiler,'Arial Narrow Bold',sans-serif;font-size:clamp(26px,5vw,40px);margin:0 0 4px;}
  header .lead{margin:0;font-size:clamp(14px,3.2vw,16px);}
  header .lead a{color:#0a58ca;text-decoration:none;border-bottom:1px dotted currentColor;}

  .campaign{margin:14px auto 8px;max-width:520px;}
  .campaign-bar{height:10px;border-radius:6px;background:#e1e1e1;overflow:hidden;}
  .campaign-fill{height:100%;width:0%;background:var(--brand);transition:width 1s ease;}
  .campaign-labels{display:flex;justify-content:space-between;font-size:12.5px;color:#555;margin-top:4px;padding:0 2px;}

  .board{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px;box-shadow:0 1px 2px rgba(0,0,0,.04);}
  .lane{display:grid;grid-template-columns:var(--name-col) 1fr;column-gap:8px;align-items:center;background:#fff;border:2px dotted var(--brand);border-radius:12px;padding:10px;min-height:var(--lane-h);margin:8px 0;overflow:hidden;}
  .name{font-family:Oswald,system-ui;font-size:clamp(16px,3.4vw,20px);padding-left:4px;word-break:break-word;}

  .track-area{position:relative;height:calc(var(--lane-h) - 14px);border-radius:10px;background:#fff;overflow:hidden;display:flex;align-items:center;}
.start-line{
  position:absolute;
  left:0px;  /* moves line closer to names */
  top:0;
  bottom:0;
  width:4px;
  background:var(--brand);
  border-radius:3px;
}
  .avatar{position:absolute;top:50%;transform:translateY(-50%);left:4px;height:calc(var(--lane-h) - 14px);transition:left .6s ease;}
  .avatar img{height:100%;width:auto;border-radius:10px;background:#fff;border:2px solid var(--brand);box-shadow:0 1px 2px rgba(0,0,0,.08);}

  .progress{position:absolute;right:8px;bottom:8px;background:#fff;border:1px solid var(--border);padding:4px 10px;border-radius:10px;font-size:13.5px;font-weight:600;color:#222;white-space:nowrap;}

  footer{margin-top:16px;text-align:center;color:#444;font-size:13px;line-height:1.35;white-space:pre-line;}

  @media (max-width:640px){
    :root{--name-col:88px;--lane-h:88px}
    .board{padding:10px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Tony Drew for the Gold! üèÜ</h1>
<p>
  <h3>The SLT are off to the races! üèÅ</h3>
<p>
  üëâ <a href="https://givebutter.com/fO5IHJ/tony-drew" target="_blank"><strong>Donate Here</strong></a> to support <strong>HD Supply Helping Hand</strong> and help our favorite racer cross the finish line! üíõ
</p>
    </header>

    <!-- Campaign timeline -->
    <div class="campaign" aria-label="Campaign timeline">
      <div class="campaign-bar"><div class="campaign-fill" id="campaignFill"></div></div>
      <div class="campaign-labels"><span>Start Oct 1</span><span>Finish Oct 31</span></div>
    </div>

    <section class="board" id="leaderboard">
      <!-- Display first names, keep full names in data-name (must match CSV) -->
      <div class="lane" data-name="Sheila Schnellenberger">
        <div class="name">Sheila</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/sheila.PNG" alt="Sheila headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Chris Kelley">
        <div class="name">Chris</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/chris.PNG" alt="Chris headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Tony Drew">
        <div class="name">Tony</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/tony.PNG" alt="Tony headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="John Drake">
        <div class="name">John</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/john.PNG" alt="John headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Sami Nassar">
        <div class="name">Sami</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/sami.PNG" alt="Sami headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Travis Lawrence">
        <div class="name">Travis</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/travis.PNG" alt="Travis headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Charles DSouza">
        <div class="name">Charles</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/charles.PNG" alt="Charles headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Dan McDevitt">
        <div class="name">Dan</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/dan.PNG" alt="Dan headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Scott Boher">
        <div class="name">Scott</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/scott.PNG" alt="Scott headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>
    </section>

    <footer>
HD Supply Charitable Fund, Inc
A 501(c)(3) Public Charity
EIN 42-1745656
    </footer>
  </div>

<script>
/* Campaign timeline (Oct 1 ‚Üí Oct 31) */
(function(){
  const start=new Date("2025-10-01T00:00:00");
  const end=new Date("2025-10-31T23:59:59");
  const now=new Date();
  const fill=document.getElementById('campaignFill');
  let pct=0;
  if(now<=start) pct=0;
  else if(now>=end) pct=100;
  else pct=((now-start)/(end-start))*100;
  fill.style.width=pct.toFixed(1)+"%";
})();

/* CSV ‚Üí rank ‚Üí move avatars between start line and amount badge */
(async function () {
  const CSV_URL="https://raw.githubusercontent.com/epmo-ps/SLT/main/slt.csv";
  const withBust=CSV_URL+(CSV_URL.includes("?")?"&":"?")+"t="+Date.now();

  function parseCSV(text){
    const lines=text.trim().split(/\r?\n/);
    if(!lines.length) return [];
    const headers=lines.shift().split(',').map(h=>h.trim());
    return lines.map(line=>{
      const cells=line.split(',').map(c=>c.trim());
      const row={}; headers.forEach((h,i)=>row[h]=cells[i]||'');
      return row;
    });
  }
  const clamp=(v,a,b)=>Math.max(a,Math.min(b,v));
  const fmt=n=>Number(String(n||0).replace(/,/g,'')||0).toLocaleString('en-US',{maximumFractionDigits:0});

  let laneData=[];

  async function loadAndRender(){
    const resp=await fetch(withBust,{cache:'no-store'});
    const csv=await resp.text();
    const rows=parseCSV(csv);
    const map=new Map(rows.map(r=>[r.Name,r]));

    const lanes=[...document.querySelectorAll('.lane[data-name]')];
    laneData=lanes.map(lane=>{
      const name=lane.getAttribute('data-name');
      const d=map.get(name)||{};
      const raised=Number(String(d.Raised||'0').replace(/,/g,''));
      const goal=Number(String(d.Goal||'10000').replace(/,/g,''));
      return { lane, name, raised, goal };
    });

    // sort and re-append
    laneData.sort((a,b)=>b.raised-a.raised);
    const board=document.getElementById('leaderboard');
    laneData.forEach(({lane})=>board.appendChild(lane));

    layout();
  }

function layout(){
  laneData.forEach(({lane, raised, goal})=>{
    // Grab elements for THIS lane
    const track     = lane.querySelector('.track-area');
    const startLine = lane.querySelector('.start-line');
    const label     = lane.querySelector('.progress');
    const avatar    = lane.querySelector('.avatar');
    if (!track || !startLine || !label || !avatar) return;

    // % to position
    const pct = clamp(goal > 0 ? (raised / goal) * 100 : 0, 0, 100);

    // Compute travel range: just after the yellow line ‚Üí just before the amount badge
    const trackRect = track.getBoundingClientRect();
    const lineRect  = startLine.getBoundingClientRect();

    // distance from track's left edge to the right edge of the start line
    const startX = Math.max(0, lineRect.right - trackRect.left) + 6; // small breathing room

    const trackW  = track.clientWidth;
    const labelW  = label.offsetWidth;
    const avatarW = avatar.getBoundingClientRect().width || 72;

    // end just before amount bubble
    const endX = Math.max(startX, trackW - labelW - avatarW - 10);

    const moveX = startX + (pct / 100) * (endX - startX);
    avatar.style.left = moveX + 'px';

    // update text
    label.textContent = `$${fmt(raised)} / $${fmt(goal)}`;
  });
}

  try{
    await loadAndRender();
    window.addEventListener('resize', layout);
  }catch(e){
    console.error('Failed to load CSV:', e);
  }
})();
</script>
</body>
</html>
