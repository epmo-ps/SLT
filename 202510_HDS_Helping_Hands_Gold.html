<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tony Drew for the Gold!</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Oswald:wght@500;700&display=swap" rel="stylesheet">

<style>
:root{
  --brand:#FFC907;
  --bg:#f7f7f7;
  --card:#ffffff;
  --border:#e8e8e8;
  --name-col:120px;        /* desktop default */
  --lane-h:148px;          /* more vertical space */
  --avatar-size:120px;     /* headshot height */
  --avatar-lift:24px;      /* drop headshots lower in the lane */
  --maxw:980px;
}
*{box-sizing:border-box}
body{margin:0;padding:18px 12px 36px;font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:#111;}
.wrap{max-width:var(--maxw);margin:0 auto;}

header{text-align:center;margin-bottom:12px;}
header h1{font-family:Oswald,Impact,Haettenschweiler,'Arial Narrow Bold',sans-serif;font-size:clamp(26px,5vw,40px);margin:0 0 6px;}
header .lead{margin:0 0 10px;font-size:clamp(14px,3.2vw,16px);}
header .lead a{color:#0a58ca;text-decoration:none;border-bottom:1px dotted currentColor;}

.campaign{margin:14px auto 8px;max-width:520px;}
.campaign-bar{height:10px;border-radius:6px;background:#e1e1e1;overflow:hidden;}
.campaign-fill{height:100%;width:0%;background:var(--brand);transition:width 1s ease;}
.campaign-labels{display:flex;justify-content:space-between;font-size:12.5px;color:#555;margin-top:4px;padding:0 2px;}

.board{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px;box-shadow:0 1px 2px rgba(0,0,0,.04);}
.lane{
  display:grid;
  grid-template-columns:var(--name-col) 1fr;
  column-gap:0;               /* ‚¨Ö closer: no space between name col and track */
  align-items:center;
  background:#fff;
  border:2px dotted var(--brand);
  border-radius:12px;
  padding:10px;
  min-height:var(--lane-h);
  margin:8px 0;
  overflow:visible;            /* allow avatars to float above border */
}
.name{
  font-family:Oswald,system-ui;
  font-size:clamp(16px,3.4vw,20px);
  padding:0 8px 0 4px;        /* tiny breathing room without re-adding a gap */
  word-break:break-word;
}

.track-area{
  position:relative;
  height:calc(var(--lane-h) - 22px);
  border-radius:10px;
  background:#fff;
  overflow:visible;
  display:flex;align-items:center;
  /* IMPORTANT: no extra right padding so avatars get full travel room on mobile */
}
.start-line{
  position:absolute;
  left:-10px;                  /* ‚¨Ö nudge the line into the name column */
  top:0;bottom:0;
  width:3px;background:var(--brand);border-radius:2px;
}

/* Avatars ‚Äúrun‚Äù on the track, above borders */
.avatar{
  position:absolute;
  z-index:20;
  top:calc(50% + var(--avatar-lift));  /* lower the avatar */
  transform:translateY(-50%);          /* keep bob centered around new baseline */
  transition:left .6s ease, top .6s ease;
  pointer-events:none;
}
.avatar img{
  height:var(--avatar-size);
  width:auto;                       /* keep proportions */
  border-radius:12px;
  border:3px solid var(--brand);
  background:#fff;
  box-shadow:0 4px 10px rgba(0,0,0,.25);
  object-fit:cover;
  animation:bob 2.2s ease-in-out infinite;
  will-change:transform;
}

/* Gentle running bob */
@keyframes bob{
  0%,100%{ transform:translateY(-50%); }
  50%    { transform:translateY(calc(-50% - 4px)); }
}
@media (prefers-reduced-motion: reduce){
  .avatar img{ animation:none !important; }
}

/* Progress badge fixed at far right; full text (no ellipsis) */
.progress{
  position:absolute;right:8px;bottom:8px;background:#fff;border:1px solid var(--border);
  padding:4px 10px;border-radius:10px;font-size:13.5px;font-weight:600;color:#222;
  white-space:nowrap;
}

/* Responsive tweaks */
@media (max-width:900px){
  :root{ --name-col:130px; }
}
@media (max-width:640px){
  :root{ --name-col:110px; --lane-h:132px; }
  .board{padding:10px}
  .progress{ font-size:12.5px; padding:3px 8px; }
}
@media (max-width:420px){
  :root{ --name-col:96px; --lane-h:128px; }
  .progress{ font-size:12px; padding:3px 8px; }
}
@media (max-width:360px){
  :root{ --name-col:88px; --lane-h:124px; }
  .progress{ font-size:11.5px; padding:3px 7px; right:6px; bottom:6px; }
}

footer{margin-top:16px;text-align:center;color:#444;font-size:13px;line-height:1.35;white-space:pre-line;}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Tony Drew for the Gold! üèÜ</h1>
      <p class="lead">The SLT are off to the races! üèÅ</p>
      <p class="lead">üëâ <a href="https://givebutter.com/fO5IHJ/tony-drew" target="_blank"><strong>Donate Here</strong></a>
        to <strong>HD Supply Helping Hand</strong> and let's blast across the finish line! üíõ</p>
    </header>

    <!-- Campaign timeline -->
    <div class="campaign" aria-label="Campaign timeline">
      <div class="campaign-bar"><div class="campaign-fill" id="campaignFill"></div></div>
      <div class="campaign-labels"><span>Start Oct 1</span><span>Finish Oct 31</span></div>
    </div>

    <section class="board" id="leaderboard">
      <!-- First names shown; full names in data-name to match CSV -->
      <div class="lane" data-name="Sheila Schnellenberger">
        <div class="name">Sheila</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/sheila.PNG" alt="Sheila headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Chris Kelley">
        <div class="name">Chris</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/chris.PNG" alt="Chris headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Tony Drew">
        <div class="name">Tony</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/tony.PNG" alt="Tony headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="John Drake">
        <div class="name">John</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/john.PNG" alt="John headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Sami Nassar">
        <div class="name">Sami</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/sami.PNG" alt="Sami headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Travis Lawrence">
        <div class="name">Travis</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/travis.PNG" alt="Travis headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Charles DSouza">
        <div class="name">Charles</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/charles.PNG" alt="Charles headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Dan McDevitt">
        <div class="name">Dan</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/dan.PNG" alt="Dan headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>

      <div class="lane" data-name="Scott Boher">
        <div class="name">Scott</div>
        <div class="track-area">
          <div class="start-line"></div>
          <div class="avatar"><img src="img/scott.PNG" alt="Scott headshot"></div>
          <div class="progress">$0 / $10,000</div>
        </div>
      </div>
    </section>

    <footer>
HD Supply Charitable Fund, Inc
A 501(c)(3) Public Charity
EIN 42-1745656
    </footer>
  </div>

<script>
/* Campaign timeline (Oct 1 ‚Üí Oct 31) */
(function campaignFillBar(){
  const start=new Date("2025-10-01T00:00:00");
  const end=new Date("2025-10-31T23:59:59");
  const fill=document.getElementById('campaignFill');

  function updateFill(){
    const now=new Date();
    let pct=0;
    if(now<=start) pct=0;
    else if(now>=end) pct=100;
    else pct=((now-start)/(end-start))*100;
    if(fill) fill.style.width=pct.toFixed(1)+"%";
  }
  updateFill();
  /* Update the bar hourly and on visibility change */
  setInterval(updateFill, 60*60*1000);
  document.addEventListener('visibilitychange',()=>!document.hidden && updateFill());
})();

/* CSV ‚Üí rank lanes ‚Üí move avatars (centered) between start line & amount badge
   + Auto-refresh every 60 seconds without page reload */
(function () {
  const CSV_URL="https://raw.githubusercontent.com/epmo-ps/SLT/main/slt.csv";

  function bust(url){ return url+(url.includes("?")?"&":"?")+"t="+Date.now(); }

  function parseCSV(text){
    const lines=text.trim().split(/\r?\n/);
    if(!lines.length) return [];
    const headers=lines.shift().split(',').map(h=>h.trim());
    return lines.map(line=>{
      const cells=line.split(',').map(c=>c.trim());
      const row={}; headers.forEach((h,i)=>row[h]=cells[i]||'');
      return row;
    });
  }
  const clamp=(v,a,b)=>Math.max(a,Math.min(b,v));
  const fmt=n=>Number(String(n||0).replace(/,/g,'')||0).toLocaleString('en-US',{maximumFractionDigits:0});

  let laneData=[];

  async function fetchRows(){
    const resp=await fetch(bust(CSV_URL),{cache:'no-store'});
    const text=await resp.text();
    return parseCSV(text);
  }

  function mapLanes(rows){
    const map=new Map(rows.map(r=>[r.Name,r]));
    const lanes=[...document.querySelectorAll('.lane[data-name]')];
    laneData=lanes.map(lane=>{
      const name=lane.getAttribute('data-name');
      const d=map.get(name)||{};
      const raised=Number(String(d.Raised||'0').replace(/,/g,''));
      const goal=Number(String(d.Goal||'10000').replace(/,/g,''));
      return { lane, name, raised, goal };
    });
  }

  function rankLanes(){
    laneData.sort((a,b)=>b.raised-a.raised);
    const board=document.querySelector('#leaderboard');
    laneData.forEach(({lane})=>board.appendChild(lane));
  }

  function layout(){
    laneData.forEach(({lane, raised, goal})=>{
      const track=lane.querySelector('.track-area');
      const startLine=lane.querySelector('.start-line');
      const label=lane.querySelector('.progress');
      const avatar=lane.querySelector('.avatar');
      if(!track||!startLine||!label||!avatar) return;

      const pct=clamp(goal>0 ? (raised/goal)*100 : 0, 0, 100);

      // geometry
      const trackRect = track.getBoundingClientRect();
      const lineRect  = startLine.getBoundingClientRect();

      // start a hair after the yellow line
      const startX = Math.max(0, lineRect.right - trackRect.left) + 2;

      const trackW  = track.clientWidth;
      const labelW  = label.offsetWidth;
      const avatarW = avatar.getBoundingClientRect().width || 72;

      // compute travel range using the AVATAR CENTER; avoid the badge
      const minCenterX = startX + (avatarW/2);
      const maxCenterX = Math.max(minCenterX, trackW - labelW - 10 - (avatarW/2));

      const centerX = minCenterX + (pct/100) * (maxCenterX - minCenterX);

      avatar.style.left = (centerX - avatarW/2) + "px";

      label.textContent = `$${fmt(raised)} / $${fmt(goal)}`;
    });
  }

  async function loadAndRender(){
    try{
      const rows=await fetchRows();
      mapLanes(rows);
      rankLanes();
      layout();
    }catch(e){
      console.error('Failed to load CSV:', e);
    }
  }

  // Initial load
  loadAndRender();

  // Re-layout after images load/resize
  window.addEventListener('load', layout);
  window.addEventListener('resize', layout);

  // Auto-refresh data every 60 seconds; also when tab becomes visible again
  setInterval(loadAndRender, 60*1000);
  document.addEventListener('visibilitychange',()=>!document.hidden && loadAndRender());
})();
</script>
</body>
</html>